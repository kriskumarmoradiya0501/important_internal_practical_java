/*CREATE OR REPLACE PROCEDURE insertStudent (
    p_sno IN NUMBER,
    p_sname IN VARCHAR2,
    p_sage IN NUMBER,
    p_saddress IN VARCHAR2,
    p_scontactno IN VARCHAR2
) AS
BEGIN
    INSERT INTO Student VALUES (p_sno, p_sname, p_sage, p_saddress, p_scontactno);
END;

CREATE OR REPLACE PROCEDURE updateStudent (
    p_sno IN NUMBER,
    p_sname IN VARCHAR2,
    p_sage IN NUMBER
) AS
BEGIN
    UPDATE Student SET Sname = p_sname, Sage = p_sage WHERE Sno = p_sno;
END;

CREATE OR REPLACE PROCEDURE deleteStudent (
    p_sno IN NUMBER
) AS
BEGIN
    DELETE FROM Student WHERE Sno = p_sno;
END;
*/
import java.sql.*;

public class StudentCRUDCallable {
    public static void main(String[] args) {
        try (Connection con = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe", "system", "oracle")) {

            // INSERT
            CallableStatement insertStmt = con.prepareCall("{call insertStudent(?, ?, ?, ?, ?)}");
            insertStmt.setInt(1, 201);
            insertStmt.setString(2, "Krish");
            insertStmt.setInt(3, 22);
            insertStmt.setString(4, "Surat");
            insertStmt.setString(5, "9876543210");
            insertStmt.execute();
            System.out.println("Record inserted.");

            // UPDATE
            CallableStatement updateStmt = con.prepareCall("{call updateStudent(?, ?, ?)}");
            updateStmt.setInt(1, 201);
            updateStmt.setString(2, "Krish Kumar");
            updateStmt.setInt(3, 23);
            updateStmt.execute();
            System.out.println("Record updated.");

            // DELETE
            CallableStatement deleteStmt = con.prepareCall("{call deleteStudent(?)}");
            deleteStmt.setInt(1, 201);
            deleteStmt.execute();
            System.out.println("Record deleted.");

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
